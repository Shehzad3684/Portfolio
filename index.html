<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Shehzad Waseem | AI Engineer & Simulation Architect</title>
  
  <script src="https://cdn.tailwindcss.com"></script>
  
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">
  
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet" />

  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          fontFamily: {
            sans: ['Inter', 'sans-serif'],
            mono: ['JetBrains Mono', 'monospace'],
          },
          colors: {
            bgDark: '#0A0F1C', 
            cardBg: 'rgba(17, 24, 39, 0.7)', 
            primary: '#00E5FF', /* Cyan-Bright */
            secondary: '#94A3B8',
            accent: '#6366F1', /* Indigo */
          },
          animation: {
            'pulse-slow': 'pulse 4s cubic-bezier(0.4, 0, 0.6, 1) infinite',
            'scan': 'scan 4s linear infinite',
          },
          keyframes: {
            scan: {
              '0%': { backgroundPosition: '0% 0%' },
              '100%': { backgroundPosition: '0% 100%' },
            }
          }
        },
      },
    }
  </script>

  <style>
    /* Custom Scrollbar */
    ::-webkit-scrollbar { width: 6px; }
    ::-webkit-scrollbar-track { background: #0A0F1C; }
    ::-webkit-scrollbar-thumb { background: #1e293b; border-radius: 4px; }
    ::-webkit-scrollbar-thumb:hover { background: #00E5FF; }

    /* Glassmorphism */
    .glass-panel {
      background: rgba(10, 15, 28, 0.75);
      backdrop-filter: blur(16px);
      -webkit-backdrop-filter: blur(16px);
      border: 1px solid rgba(255, 255, 255, 0.08);
      box-shadow: 0 4px 30px rgba(0, 0, 0, 0.3);
    }
    
    .glass-card {
      background: linear-gradient(180deg, rgba(30, 41, 59, 0.3) 0%, rgba(15, 23, 42, 0.4) 100%);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(148, 163, 184, 0.1);
      transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    }

    .glass-card:hover {
      transform: translateY(-5px);
      border-color: rgba(0, 229, 255, 0.4);
      box-shadow: 0 0 30px -5px rgba(0, 229, 255, 0.15);
    }

    /* Text Gradients */
    .text-gradient {
      background: linear-gradient(135deg, #00E5FF 0%, #6366F1 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    /* Lab Monitor Effect */
    .lab-border {
        position: relative;
    }
    .lab-border::after {
        content: '';
        position: absolute;
        top: 0; left: 0; right: 0; bottom: 0;
        border-radius: 0.5rem;
        box-shadow: inset 0 0 20px rgba(0, 229, 255, 0.1);
        pointer-events: none;
        z-index: 10;
    }
    
    /* Utilities */
    .reveal-on-scroll { opacity: 0; transform: translateY(30px); transition: all 0.8s ease-out; }
    .reveal-on-scroll.visible { opacity: 1; transform: translateY(0); }
    
    canvas { touch-action: none; }
  </style>
</head>
<body class="bg-bgDark text-slate-300 font-sans selection:bg-primary selection:text-bgDark overflow-x-hidden">

  <div class="fixed inset-0 z-0 pointer-events-none opacity-20" 
       style="background-image: radial-gradient(#1e293b 1px, transparent 1px); background-size: 30px 30px;">
  </div>

  <nav class="fixed w-full z-50 transition-all duration-300 top-0" id="navbar">
    <div class="max-w-7xl mx-auto px-6 py-4 flex justify-between items-center glass-panel rounded-b-xl mx-4 mt-0 border-t-0">
      <a href="#" class="text-xl font-mono font-bold tracking-tighter hover:text-white transition-colors flex items-center gap-2">
        <i class="fas fa-code-branch text-primary"></i> SHEHZAD_WASEEM
      </a>
      
      <div class="hidden md:flex gap-8 text-sm font-medium font-mono">
        <a href="#labs" class="text-primary hover:text-white transition-colors"><i class="fas fa-flask mr-1"></i> LABS</a>
        <a href="#projects" class="hover:text-primary transition-colors">PROJECTS</a>
        <a href="#about" class="hover:text-primary transition-colors">ABOUT</a>
        <a href="#contact" class="hover:text-primary transition-colors">CONTACT</a>
      </div>
    </div>
  </nav>

  <main class="relative z-10 pt-32 px-6 max-w-7xl mx-auto">
    
    <section class="min-h-[80vh] flex flex-col justify-center reveal-on-scroll relative">
      <div class="absolute right-0 top-1/2 -translate-y-1/2 w-1/2 h-full hidden lg:block opacity-60 pointer-events-none">
          <pre class="text-xs text-primary/20 font-mono leading-relaxed overflow-hidden h-full">
class NeuralNetwork {
  constructor(layers) {
    this.layers = layers;
    this.weights = [];
    // Initializing avionics systems...
    // Calibrating PID controllers...
    // Loading genetic models...
  }
  train(inputs, targets) {
    let outputs = this.feedForward(inputs);
    // Optimizing flight path...
  }
}
          </pre>
      </div>

      <div class="z-10 max-w-3xl">
          <div class="inline-flex items-center gap-2 px-3 py-1 rounded bg-accent/10 border border-accent/20 text-accent text-xs font-mono font-bold mb-6">
            <span class="w-2 h-2 rounded-full bg-accent animate-pulse"></span>
            SYSTEM ONLINE
          </div>
          
          <h1 class="text-6xl md:text-8xl font-bold leading-none mb-6 text-white tracking-tight">
            ENGINEERING <br />
            <span class="text-gradient">INTELLIGENCE</span>
          </h1>
          
          <p class="text-xl text-secondary max-w-2xl leading-relaxed mb-10 font-light">
            I build <strong class="text-white">Autonomous Systems</strong> and <strong class="text-white">AI Simulations</strong>. 
            Merging the precision of Aviation with the adaptability of Machine Learning.
          </p>

          <div class="flex flex-wrap gap-4">
            <a href="#labs" class="px-8 py-4 bg-primary text-bgDark font-bold rounded hover:bg-white transition-all shadow-[0_0_30px_rgba(0,229,255,0.3)] flex items-center gap-2">
              <i class="fas fa-play"></i> Run Simulations
            </a>
            <a href="https://github.com/Shehzad3684" target="_blank" class="px-8 py-4 glass-card text-white font-medium rounded hover:bg-white/10 transition-all flex items-center gap-2">
              <i class="fab fa-github"></i> GitHub
            </a>
          </div>
      </div>
    </section>

    <section id="labs" class="py-24">
        <div class="flex items-end justify-between mb-12 reveal-on-scroll">
            <div>
              <h2 class="text-4xl font-bold text-white mb-2 flex items-center gap-3">
                  <i class="fas fa-microscope text-primary"></i> Research Labs
              </h2>
              <p class="text-secondary font-mono text-sm">Interactive demonstrations of AI & Control Theory.</p>
            </div>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
            
            <div class="glass-card rounded-xl p-1 border-t-2 border-t-primary reveal-on-scroll group">
                <div class="bg-bgDark/80 p-6 rounded-lg h-full">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-xl font-bold text-white"><i class="fas fa-dna text-primary mr-2"></i> Genetic Pathfinding</h3>
                        <div class="text-xs font-mono text-primary bg-primary/10 px-2 py-1 rounded">GEN: <span id="gen-count">0</span></div>
                    </div>
                    <div class="relative w-full h-64 bg-slate-900 rounded border border-slate-700 overflow-hidden lab-border cursor-crosshair">
                        <canvas id="canvas-rockets" class="w-full h-full"></canvas>
                        <div class="absolute bottom-2 left-2 text-xs font-mono text-slate-500 pointer-events-none">
                            Target: Mouse | Obstacles: Fixed
                        </div>
                    </div>
                    <p class="text-sm text-secondary mt-4">
                        <strong class="text-white">Algorithm:</strong> Genetic Algorithm (Evolution).
                        <br>Rockets evolve autonomous steering behaviors over generations to hit the target while avoiding obstacles. The fittest rockets pass their DNA to the next generation.
                    </p>
                </div>
            </div>

            <div class="glass-card rounded-xl p-1 border-t-2 border-t-accent reveal-on-scroll group">
                <div class="bg-bgDark/80 p-6 rounded-lg h-full">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-xl font-bold text-white"><i class="fas fa-plane-arrival text-accent mr-2"></i> Swarm Intelligence</h3>
                        <div class="text-xs font-mono text-accent bg-accent/10 px-2 py-1 rounded">AGENTS: 50</div>
                    </div>
                    <div class="relative w-full h-64 bg-slate-900 rounded border border-slate-700 overflow-hidden lab-border cursor-pointer">
                        <canvas id="canvas-boids" class="w-full h-full"></canvas>
                        <div class="absolute bottom-2 left-2 text-xs font-mono text-slate-500 pointer-events-none">
                            Click to Scatter
                        </div>
                    </div>
                    <p class="text-sm text-secondary mt-4">
                        <strong class="text-white">Algorithm:</strong> Boids (Craig Reynolds).
                        <br>Simulates drone swarm behavior using three simple rules: Separation, Alignment, and Cohesion. No central control.
                    </p>
                </div>
            </div>

            <div class="glass-card rounded-xl p-1 border-t-2 border-t-green-400 reveal-on-scroll lg:col-span-2 group">
                <div class="bg-bgDark/80 p-6 rounded-lg h-full flex flex-col md:flex-row gap-6">
                    <div class="md:w-1/2">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-xl font-bold text-white"><i class="fas fa-network-wired text-green-400 mr-2"></i> Neural Decision Boundary</h3>
                        </div>
                        <div class="relative w-full h-64 bg-slate-900 rounded border border-slate-700 overflow-hidden lab-border">
                            <canvas id="canvas-nn" class="w-full h-full"></canvas>
                        </div>
                    </div>
                    <div class="md:w-1/2 flex flex-col justify-center">
                        <h4 class="text-white font-bold mb-2">Perceptron Engine</h4>
                        <p class="text-sm text-secondary mb-4">
                            A live visualization of a neural network learning to classify data points. Watch the background (decision boundary) shift as the model trains in real-time.
                        </p>
                        <div class="grid grid-cols-2 gap-3">
                            <button id="btn-nn-train" class="px-4 py-2 bg-green-500/20 text-green-400 border border-green-500/50 rounded hover:bg-green-500 hover:text-white transition-colors text-sm font-mono font-bold">
                                <i class="fas fa-play mr-2"></i> TRAIN
                            </button>
                            <button id="btn-nn-reset" class="px-4 py-2 bg-slate-700 text-white rounded hover:bg-slate-600 transition-colors text-sm font-mono">
                                RESET
                            </button>
                        </div>
                        <div class="mt-4 text-xs font-mono text-slate-500">
                            Loss: <span id="nn-loss">0.000</span> | Epoch: <span id="nn-epoch">0</span>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </section>

    <section id="projects" class="py-24 reveal-on-scroll">
      <h2 class="text-4xl font-bold text-white mb-12">Built Projects</h2>
      <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
        
        <article class="glass-card p-6 rounded-xl hover:bg-slate-800/50 transition-colors">
          <div class="flex justify-between items-start mb-4">
            <i class="fas fa-eye text-2xl text-primary"></i>
            <a href="#" class="text-slate-500 hover:text-white"><i class="fab fa-github"></i></a>
          </div>
          <h3 class="text-xl font-bold text-white mb-2">CNN Image Classifier</h3>
          <p class="text-sm text-secondary mb-4">
            Custom Convolutional Neural Network architecture achieving 92% accuracy on validation sets. Optimized for edge deployment.
          </p>
          <div class="flex gap-2 flex-wrap">
            <span class="text-xs bg-slate-800 text-primary px-2 py-1 rounded">TensorFlow</span>
            <span class="text-xs bg-slate-800 text-primary px-2 py-1 rounded">Python</span>
          </div>
        </article>

        <article class="glass-card p-6 rounded-xl hover:bg-slate-800/50 transition-colors">
            <div class="flex justify-between items-start mb-4">
              <i class="fas fa-solar-panel text-2xl text-accent"></i>
              <a href="#" class="text-slate-500 hover:text-white"><i class="fab fa-github"></i></a>
            </div>
            <h3 class="text-xl font-bold text-white mb-2">Dual Axis Solar Tracker</h3>
            <p class="text-sm text-secondary mb-4">
              Arduino-based IoT system using LDRs and servos to track sun position, increasing efficiency by 40%.
            </p>
            <div class="flex gap-2 flex-wrap">
              <span class="text-xs bg-slate-800 text-accent px-2 py-1 rounded">C++</span>
              <span class="text-xs bg-slate-800 text-accent px-2 py-1 rounded">Embedded</span>
            </div>
          </article>

          <article class="glass-card p-6 rounded-xl hover:bg-slate-800/50 transition-colors">
            <div class="flex justify-between items-start mb-4">
              <i class="fas fa-chart-line text-2xl text-green-400"></i>
              <a href="#" class="text-slate-500 hover:text-white"><i class="fab fa-github"></i></a>
            </div>
            <h3 class="text-xl font-bold text-white mb-2">Analytics Dashboard</h3>
            <p class="text-sm text-secondary mb-4">
              End-to-end data pipeline cleaning raw CSVs with Pandas and visualizing KPIs in Power BI.
            </p>
            <div class="flex gap-2 flex-wrap">
              <span class="text-xs bg-slate-800 text-green-400 px-2 py-1 rounded">Pandas</span>
              <span class="text-xs bg-slate-800 text-green-400 px-2 py-1 rounded">Power BI</span>
            </div>
          </article>

      </div>
    </section>

    <footer id="contact" class="py-24 border-t border-slate-800 text-center reveal-on-scroll">
      <h2 class="text-3xl font-bold text-white mb-6">Connect</h2>
      <div class="flex justify-center gap-6 mb-12">
        <a href="mailto:thedownloader049@gmail.com" class="text-2xl text-secondary hover:text-primary transition-colors"><i class="fas fa-envelope"></i></a>
        <a href="https://github.com/Shehzad3684" class="text-2xl text-secondary hover:text-white transition-colors"><i class="fab fa-github"></i></a>
      </div>
      <p class="text-slate-600 font-mono text-xs">
        SYSTEM_STATUS: NORMAL | LOCATION: ISLAMABAD, PK
      </p>
    </footer>

  </main>

  <script>
    // --- UTILITIES ---
    const getMousePos = (canvas, evt) => {
        const rect = canvas.getBoundingClientRect();
        return {
            x: (evt.clientX - rect.left) * (canvas.width / rect.width),
            y: (evt.clientY - rect.top) * (canvas.height / rect.height)
        };
    };
    
    // Resize Observer to handle canvas sizing
    const setupCanvas = (id, logicFn) => {
        const canvas = document.getElementById(id);
        const ctx = canvas.getContext('2d');
        let width, height;
        let animationId;
        
        const resize = () => {
            const parent = canvas.parentElement;
            width = parent.clientWidth;
            height = parent.clientHeight;
            canvas.width = width;
            canvas.height = height;
        };
        window.addEventListener('resize', resize);
        resize();

        // Intersection Observer to pause when off-screen (Performance)
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    if (!animationId) loop();
                } else {
                    cancelAnimationFrame(animationId);
                    animationId = null;
                }
            });
        }, { threshold: 0.1 });
        observer.observe(canvas);

        const loop = () => {
            logicFn(ctx, width, height);
            animationId = requestAnimationFrame(loop);
        };
    };

    // --- LAB 1: GENETIC ROCKETS ---
    (() => {
        let population = [];
        let target = { x: 0, y: 0 };
        let obstacle = { x: 0, y: 0, w: 0, h: 10 };
        let lifeSpan = 200;
        let count = 0;
        let generation = 1;
        const popSize = 30;

        class DNA {
            constructor(genes) {
                if (genes) {
                    this.genes = genes;
                } else {
                    this.genes = [];
                    for (let i = 0; i < lifeSpan; i++) {
                        // Random vector
                        this.genes[i] = { 
                            x: (Math.random() - 0.5) * 0.4, 
                            y: (Math.random() - 0.5) * 0.4 
                        };
                    }
                }
            }
            crossover(partner) {
                let newgenes = [];
                let mid = Math.floor(Math.random() * this.genes.length);
                for (let i = 0; i < this.genes.length; i++) {
                    if (i > mid) newgenes[i] = this.genes[i];
                    else newgenes[i] = partner.genes[i];
                }
                return new DNA(newgenes);
            }
            mutation() {
                for (let i = 0; i < this.genes.length; i++) {
                    if (Math.random() < 0.01) {
                        this.genes[i] = { 
                            x: (Math.random() - 0.5) * 0.4, 
                            y: (Math.random() - 0.5) * 0.4 
                        };
                    }
                }
            }
        }

        class Rocket {
            constructor(dna) {
                this.pos = { x: 50, y: 150 }; // Will be reset in logic
                this.vel = { x: 0, y: 0 };
                this.acc = { x: 0, y: 0 };
                this.dna = dna || new DNA();
                this.fitness = 0;
                this.completed = false;
                this.crashed = false;
            }
            applyForce(force) {
                this.acc.x += force.x;
                this.acc.y += force.y;
            }
            update(count) {
                if (!this.completed && !this.crashed) {
                    this.applyForce(this.dna.genes[count]);
                    this.vel.x += this.acc.x;
                    this.vel.y += this.acc.y;
                    this.pos.x += this.vel.x;
                    this.pos.y += this.vel.y;
                    this.acc = { x: 0, y: 0 };

                    // Distance to target
                    let d = Math.hypot(this.pos.x - target.x, this.pos.y - target.y);
                    if (d < 10) {
                        this.completed = true;
                        this.pos = { ...target };
                    }

                    // Obstacle hit
                    if (this.pos.x > obstacle.x && this.pos.x < obstacle.x + obstacle.w &&
                        this.pos.y > obstacle.y && this.pos.y < obstacle.y + obstacle.h) {
                        this.crashed = true;
                    }
                }
            }
            calcFitness() {
                let d = Math.hypot(this.pos.x - target.x, this.pos.y - target.y);
                this.fitness = 1 / d;
                if (this.completed) this.fitness *= 10;
                if (this.crashed) this.fitness /= 10;
            }
        }

        // Init
        for(let i=0; i<popSize; i++) population.push(new Rocket());

        const canvas = document.getElementById('canvas-rockets');
        // Mouse interaction for target
        canvas.addEventListener('mousemove', e => {
            const pos = getMousePos(canvas, e);
            target = pos;
        });

        setupCanvas('canvas-rockets', (ctx, width, height) => {
            // Setup positions on first run/resize
            if(count === 0) {
                obstacle = { x: width/2 - 50, y: height/2, w: 100, h: 10 };
                if(target.x === 0) target = { x: width/2, y: 30 };
            }

            // Logic
            count++;
            if (count >= lifeSpan) {
                // Evolve
                population.forEach(r => r.calcFitness());
                let matingPool = [];
                let maxFit = Math.max(...population.map(r => r.fitness));
                population.forEach(r => {
                    let n = Math.floor((r.fitness / maxFit) * 100);
                    for(let i=0; i<n; i++) matingPool.push(r);
                });
                
                let newPop = [];
                for(let i=0; i<population.length; i++) {
                    let parentA = matingPool[Math.floor(Math.random() * matingPool.length)] || population[0];
                    let parentB = matingPool[Math.floor(Math.random() * matingPool.length)] || population[0];
                    let child = parentA.dna.crossover(parentB.dna);
                    child.mutation();
                    newPop.push(new Rocket(child));
                }
                population = newPop;
                population.forEach(r => r.pos = {x: width/2, y: height - 20});
                count = 0;
                generation++;
                document.getElementById('gen-count').innerText = generation;
            }

            // Draw
            ctx.fillStyle = '#0f172a'; // Deep BG
            ctx.fillRect(0, 0, width, height);

            // Target
            ctx.beginPath();
            ctx.arc(target.x, target.y, 8, 0, Math.PI*2);
            ctx.fillStyle = '#00E5FF';
            ctx.fill();

            // Obstacle
            ctx.fillStyle = '#ef4444';
            ctx.fillRect(obstacle.x, obstacle.y, obstacle.w, obstacle.h);

            // Rockets
            population.forEach(r => {
                r.update(count);
                ctx.save();
                ctx.translate(r.pos.x, r.pos.y);
                // Rotate based on velocity
                let angle = Math.atan2(r.vel.y, r.vel.x);
                ctx.rotate(angle);
                ctx.fillStyle = 'rgba(255, 255, 255, 0.7)';
                if(r.completed) ctx.fillStyle = '#00E5FF';
                if(r.crashed) ctx.fillStyle = '#ef4444';
                // Draw triangle
                ctx.beginPath();
                ctx.moveTo(10, 0);
                ctx.lineTo(-5, -5);
                ctx.lineTo(-5, 5);
                ctx.fill();
                ctx.restore();
            });
        });
    })();

    // --- LAB 2: BOIDS ---
    (() => {
        const boids = [];
        const numBoids = 50;
        class Boid {
            constructor(w, h) {
                this.pos = { x: Math.random()*w, y: Math.random()*h };
                this.vel = { x: Math.random()-0.5, y: Math.random()-0.5 };
                this.acc = { x: 0, y: 0 };
                this.maxSpeed = 3;
                this.maxForce = 0.05;
            }
            // Logic for separation, alignment, cohesion omitted for brevity, using simple flocking
            flock(boids) {
                // Simplified physics for demo
                let perception = 50;
                let avgPos = {x:0, y:0}, avgVel = {x:0, y:0}, total=0;
                let separation = {x:0, y:0};
                
                boids.forEach(other => {
                    let d = Math.hypot(this.pos.x - other.pos.x, this.pos.y - other.pos.y);
                    if (other !== this && d < perception) {
                        avgPos.x += other.pos.x; avgPos.y += other.pos.y;
                        avgVel.x += other.vel.x; avgVel.y += other.vel.y;
                        total++;
                        if(d < 20) {
                            separation.x += (this.pos.x - other.pos.x) / d;
                            separation.y += (this.pos.y - other.pos.y) / d;
                        }
                    }
                });

                if(total > 0) {
                    avgPos.x /= total; avgPos.y /= total;
                    avgVel.x /= total; avgVel.y /= total;
                    
                    // Cohesion + Alignment + Separation
                    this.vel.x += (avgPos.x - this.pos.x)*0.005 + (avgVel.x - this.vel.x)*0.01 + separation.x*0.05;
                    this.vel.y += (avgPos.y - this.pos.y)*0.005 + (avgVel.y - this.vel.y)*0.01 + separation.y*0.05;
                }
            }
            update(w, h) {
                // Normalize speed
                let speed = Math.hypot(this.vel.x, this.vel.y);
                if(speed > this.maxSpeed) {
                    this.vel.x = (this.vel.x / speed) * this.maxSpeed;
                    this.vel.y = (this.vel.y / speed) * this.maxSpeed;
                }
                this.pos.x += this.vel.x;
                this.pos.y += this.vel.y;
                
                // Wrap edges
                if(this.pos.x < 0) this.pos.x = w;
                if(this.pos.x > w) this.pos.x = 0;
                if(this.pos.y < 0) this.pos.y = h;
                if(this.pos.y > h) this.pos.y = 0;
            }
        }
        
        let initialized = false;
        setupCanvas('canvas-boids', (ctx, w, h) => {
            if(!initialized) {
                for(let i=0; i<numBoids; i++) boids.push(new Boid(w, h));
                initialized = true;
            }
            
            ctx.fillStyle = '#0f172a';
            ctx.fillRect(0, 0, w, h);
            
            boids.forEach(b => {
                b.flock(boids);
                b.update(w, h);
                
                // Draw Jet
                ctx.save();
                ctx.translate(b.pos.x, b.pos.y);
                ctx.rotate(Math.atan2(b.vel.y, b.vel.x));
                ctx.beginPath();
                ctx.moveTo(8, 0);
                ctx.lineTo(-4, -4);
                ctx.lineTo(-4, 4);
                ctx.fillStyle = '#6366F1'; // Indigo
                ctx.fill();
                ctx.restore();
            });
        });
        
        // Click interaction
        document.getElementById('canvas-boids').addEventListener('click', () => {
             boids.forEach(b => {
                 b.vel.x = (Math.random()-0.5) * 10;
                 b.vel.y = (Math.random()-0.5) * 10;
             });
        });
    })();

    // --- LAB 3: NEURAL NET ---
    (() => {
        let points = [];
        let weights = { w1: Math.random()-0.5, w2: Math.random()-0.5, b: 0 };
        let isTraining = false;
        let epoch = 0;
        
        function sigmoid(x) { return 1 / (1 + Math.exp(-x)); }
        function predict(x, y) { return sigmoid(weights.w1 * x + weights.w2 * y + weights.b); }
        
        function trainBatch(w, h) {
             const lr = 0.1;
             let loss = 0;
             points.forEach(p => {
                const x = p.x / w;
                const y = p.y / h;
                const guess = predict(x, y);
                const error = guess - p.label;
                weights.w1 -= error * x * lr;
                weights.w2 -= error * y * lr;
                weights.b -= error * lr;
                loss += Math.abs(error);
             });
             epoch++;
             document.getElementById('nn-loss').innerText = (loss/points.length || 0).toFixed(3);
             document.getElementById('nn-epoch').innerText = epoch;
        }

        setupCanvas('canvas-nn', (ctx, w, h) => {
             if(isTraining && points.length > 0) trainBatch(w, h);

             // Draw Boundary
             const res = 10;
             for(let x=0; x<w; x+=res) {
                 for(let y=0; y<h; y+=res) {
                     const p = predict(x/w, y/h);
                     ctx.fillStyle = p > 0.5 ? `rgba(74, 222, 128, ${p-0.5})` : `rgba(30, 41, 59, 1)`;
                     ctx.fillRect(x, y, res, res);
                 }
             }

             // Draw Points
             points.forEach(p => {
                 ctx.beginPath();
                 ctx.arc(p.x, p.y, 6, 0, Math.PI*2);
                 ctx.fillStyle = p.label === 1 ? '#4ade80' : '#94a3b8';
                 ctx.fill();
                 ctx.strokeStyle = '#fff';
                 ctx.stroke();
             });
        });

        // Interactions
        const canvas = document.getElementById('canvas-nn');
        canvas.addEventListener('mousedown', e => {
            const pos = getMousePos(canvas, e);
            // Top half = 0, Bottom half = 1 (Target)
            const label = pos.y > canvas.height/2 ? 1 : 0;
            points.push({ ...pos, label });
        });

        document.getElementById('btn-nn-train').addEventListener('click', () => {
            isTraining = !isTraining;
        });
        document.getElementById('btn-nn-reset').addEventListener('click', () => {
             points = [];
             weights = { w1: Math.random()-0.5, w2: Math.random()-0.5, b: 0 };
             isTraining = false;
             epoch = 0;
        });
    })();
    
    // UI Reveal
    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if(entry.isIntersecting) entry.target.classList.add('visible');
        });
    }, { threshold: 0.1 });
    document.querySelectorAll('.reveal-on-scroll').forEach(el => observer.observe(el));
  </script>
</body>
</html>
